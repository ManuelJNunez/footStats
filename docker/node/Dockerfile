FROM node:lts AS base

#Copia de los archivos de dependencias
COPY package.json package-lock.json ./

# Instalaci贸n de las dependencias de la aplicaci贸n
RUN npm install --silent --progress=false

FROM node:lts AS dependencies
#Copiando los node_modules desde un stage anterior
COPY --from=dependencies /node_modules /node_modules

#Creaci贸n del volumen
VOLUME ["/test"]
WORKDIR /test

#PATH del node_modules
ENV PATH=/node_modules/.bin:$PATH

#Ejecuci贸n de los tests
CMD ["npm", "test"]